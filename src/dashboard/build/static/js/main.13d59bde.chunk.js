(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{17:function(e,t,a){e.exports=a(31)},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(1),s=a.n(o),l=a(3),i=a.n(l),c=a(8),u=a(11),d=a(12),m=a(16),h=a(15),f=a(14),g=a(5),p=a(6),w=a.n(p),C=function(){return n.a.createElement("nav",{className:"flex items-center justify-between flex-wrap bg-white py-6 px-6 md:px-16 shadow-sm"},n.a.createElement("div",{className:"flex items-center flex-shrink-0 text-gray-600 mr-6"},n.a.createElement("a",{href:"/"},n.a.createElement("span",{className:"text-xl tracking-tight"},"COVID-19 DASHBOARD"))),n.a.createElement("div",{className:"w-full block flex-grow lg:flex lg:items-center lg:w-auto"},n.a.createElement("div",{className:"text-sm lg:flex-grow"}),n.a.createElement("div",null,n.a.createElement("a",{href:"https://datahub.io/core/covid-19",target:"_blank",className:"block mt-4 lg:ml-6 lg:inline-block lg:mt-0 text-sm text-gray-700 hover:text-black"},"RAW DATA"),n.a.createElement("a",{href:"https://www.datopian.com/about/",target:"_blank",className:"block mt-4 lg:ml-6 lg:inline-block lg:mt-0 text-sm text-gray-700 hover:text-black"},"TEAM"),n.a.createElement("a",{href:"https://www.datopian.com/contact/",target:"_blank",className:"block mt-4 lg:ml-6 lg:inline-block lg:mt-0 text-sm text-gray-700 hover:text-black"},"CONTACT"))))},y=function(e){var t=e.totalCases,a=e.totalDeaths,r=e.deathRate,o=e.newCases,s=e.newCaseRate,l=e.casesPer100k;return n.a.createElement("div",{className:"grid sm:grid-cols-1 lg:grid-cols-6 gap-6 mt-4 mb-4 font-bold text-2xl"},n.a.createElement("div",{className:"border text-center py-12"},t,n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"Cases")),n.a.createElement("div",{className:"border text-center py-12"},a,n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"Deaths")),n.a.createElement("div",{className:"border text-center py-12"},r,"%",n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"Death rate")),n.a.createElement("div",{className:"border text-center py-12"},o,n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"New cases yesterday")),n.a.createElement("div",{className:"border text-center py-12"},s,"%",n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"New cases rate")),n.a.createElement("div",{className:"border text-center py-12"},l,n.a.createElement("div",{className:"text-xs text-gray-600 font-light"},"Cases per 100k")))},x=a(4),D=a.n(x),v=function(e){return n.a.createElement(D.a,{className:"w-full h-graph",data:e.data,layout:{yaxis:{type:"log"},colorway:["black","gray","orange"]},config:{responsive:!0,displayModeBar:!1}})},b=function(e){return n.a.createElement(D.a,{className:"w-full h-screen md:h-map",data:e.data,layout:{title:"Cumulative confirmed cases",geo:{showframe:!1,showcoastlines:!1,showland:!0,landcolor:"rgb(217, 217, 217)",projection:{type:"robinson"}}},config:{responsive:!0,displayModeBar:!1}})},E=a(9),k=function(e){var t=n.a.useMemo((function(){return e.data}),[]),a=n.a.useMemo((function(){return e.columns}),[]),r=Object(E.useTable)({columns:a,data:t},E.useSortBy),o=r.getTableProps,s=r.getTableBodyProps,l=r.headerGroups,i=r.rows,c=r.prepareRow;return n.a.createElement("table",Object.assign({},o(),{className:"table-auto block h-screen-0.8 overflow-y-scroll"}),n.a.createElement("thead",null,l.map((function(e){return n.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return n.a.createElement("th",Object.assign({},e.getHeaderProps(e.getSortByToggleProps()),{className:"border px-4 py-2"}),e.render("Header"),n.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":" \u2195\ufe0f"))})))}))),n.a.createElement("tbody",s(),i.map((function(e){return c(e),n.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return n.a.createElement("td",Object.assign({className:"border px-4 py-2"},e.getCellProps()),e.render("Cell"))})))}))))},N=(a(30),function(e){Object(m.a)(a,e);var t=Object(h.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).state={country:"world",worldwideData:[],countryData:[],referenceData:[],isLoading:!1},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,a,r,n,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(window.location.href),a=t.searchParams.get("country")||"world",this.setState({isLoading:!0,country:a}),n=(r="https://raw.githubusercontent.com/datasets/covid-19/master/")+"datapackage.json",o={isLoading:!1},e.next=8,fetch(n);case 8:return e.next=10,e.sent.json();case 10:return s=e.sent,e.next=13,Promise.all(s.resources.map(function(){var e=Object(c.a)(i.a.mark((function e(t){var a,n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("countries-aggregated"!==t.name){e.next=13;break}return e.next=3,fetch(r+t.path);case 3:return a=e.sent,e.t0=g.parse,e.next=7,a.text();case 7:e.t1=e.sent,e.t2={header:!0},o.countryData=(0,e.t0)(e.t1,e.t2).data,o.countryData[o.countryData.length-1].Date||o.countryData.pop(),e.next=37;break;case 13:if("worldwide-aggregated"!==t.name){e.next=26;break}return e.next=16,fetch(r+t.path);case 16:return n=e.sent,e.t3=g.parse,e.next=20,n.text();case 20:e.t4=e.sent,e.t5={header:!0},o.worldwideData=(0,e.t3)(e.t4,e.t5).data,o.worldwideData[o.worldwideData.length-1].Date||o.worldwideData.pop(),e.next=37;break;case 26:if("reference"!==t.name){e.next=37;break}return e.next=29,fetch(r+t.path);case 29:return s=e.sent,e.t6=g.parse,e.next=33,s.text();case 33:e.t7=e.sent,e.t8={header:!0},o.referenceData=(0,e.t6)(e.t7,e.t8).data,o.referenceData[o.referenceData.length-1].Date||o.referenceData.pop();case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 13:this.setState(o);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCountriesDataForDate",value:function(e){var t=this.state.countryData;if(t.length>0){var a=[];if("latest"===e)e=t[t.length-1].Date;else if("previous"===e){var r=t[t.length-1].Date,n=new Date(r),o=new Date(n.setDate(n.getDate()-1));e=o.toISOString().slice(0,10)}return t.forEach((function(t){t.Date===e&&a.push(t)})),a}}},{key:"getTotalCasesAndDeaths",value:function(){var e,t,a=this.state,r=a.worldwideData,n=a.country;if("world"===n&&r.length>0)e=r[r.length-1].Confirmed,t=r[r.length-1].Deaths;else{var o=this.getCountriesDataForDate("latest");if(o){var s=o.find((function(e){return e.Country.toLowerCase()===n.toLowerCase()}));e=s.Confirmed,t=s.Deaths}}return{totalCases:e,totalDeaths:t}}},{key:"getNewCasesAndRate",value:function(){var e,t,a=this.state,r=a.worldwideData,n=a.countryData,o=a.country;if("world"===o&&r.length>0)t=((e=r[r.length-1].Confirmed-r[r.length-2].Confirmed)/r[r.length-2].Confirmed*100).toFixed(2);else if(n.length>0){var s=this.getCountriesDataForDate("latest").find((function(e){return e.Country.toLowerCase()===o.toLowerCase()})),l=this.getCountriesDataForDate("previous").find((function(e){return e.Country.toLowerCase()===o.toLowerCase()}));t=((e=s.Confirmed-l.Confirmed)/l.Confirmed*100).toFixed(2)}return{newCases:e,newCasesRate:t}}},{key:"getCasesPer100k",value:function(){var e,t=this.state,a=t.worldwideData,r=t.referenceData,n=t.country,o=this.getCountriesDataForDate("latest");if("world"===n.toLowerCase()){if(a.length>0){e=(a[a.length-1].Confirmed/7594270356*1e5).toFixed(0)}}else if(o&&r.length>0){var s=o.find((function(e){return e.Country.toLowerCase()===n.toLowerCase()})),l=r.find((function(e){return e.Country_Region.toLowerCase()===n.toLowerCase()})).Population;e=(s.Confirmed/l*1e5).toFixed(0)}return e}},{key:"getChartData",value:function(){var e=this.state,t=e.country,a=e.worldwideData,r=e.countryData,n={x:[],y:[],type:"scatter",name:"Cumilative confirmed cases",mode:"lines+markers"},o={x:[],y:[],type:"bar",name:"New cases per day"},s={x:[],y:[],type:"bar",name:"Deaths per day"},l={Confirmed:0,Deaths:0};return"world"===t?a.forEach((function(e){n.x.push(e.Date),n.y.push(parseInt(e.Confirmed)),o.x.push(e.Date),o.y.push(e.Confirmed-l.Confirmed),s.x.push(e.Date),s.y.push(e.Deaths-l.Deaths),l=JSON.parse(JSON.stringify(e))})):r.forEach((function(e){e.Country.toLowerCase()===t.toLowerCase()&&(n.x.push(e.Date),n.y.push(parseInt(e.Confirmed)),o.x.push(e.Date),o.y.push(e.Confirmed-l.Confirmed),s.x.push(e.Date),s.y.push(e.Deaths-l.Deaths),l=JSON.parse(JSON.stringify(e)))})),[n,o,s]}},{key:"getChartDataForComparison",value:function(){var e=this.state.referenceData,t={x:[],y:[],type:"bar",orientation:"h"},a=this.getCountriesDataForDate("latest");return a&&e.length>0&&a.forEach((function(a){t.y.push(a.Country);var r=e.find((function(e){return e.Country_Region.toLowerCase()===a.Country.toLowerCase()})).Population,n=(a.Confirmed/r*1e5).toFixed(2);t.x.push(n)})),[t]}},{key:"getMapData",value:function(){var e=this.state.referenceData,t=this.getCountriesDataForDate("latest"),a=[{type:"choropleth",locations:[],z:[],text:[],autocolorscale:!1,zmin:100,zmax:1e6,colorscale:[[0,"rgb(255,246,229)"],[.2,"rgb(255,165,1)"],[.4,"rgb(229,148,0)"],[.6,"rgb(178,115,0)"],[.8,"rgb(127,82,0)"],[1,"rgb(51,33,0)"]],colorbar:{thickness:5},marker:{line:{color:"rgb(255,255,255)",width:1}}}];return t&&e.length>0&&t.forEach((function(t){a[0].z.push(t.Confirmed),a[0].text.push(t.Country);var r=e.find((function(e){return e.Country_Region.toLowerCase()===t.Country.toLowerCase()}));a[0].locations.push(r.iso3)})),a}},{key:"getTableData",value:function(){var e=this.state.referenceData,t=[],a=[],r=this.getCountriesDataForDate("latest"),n=this.getCountriesDataForDate("previous");return r&&e.length>0&&((t=r).map((function(t,a){t["Death rate"]=(t.Deaths/t.Confirmed*100).toFixed(2)+"%",t["New cases"]=t.Confirmed-n[a].Confirmed,t["New cases rate"]=(t["New cases"]/n[a].Confirmed*100).toFixed(2)+"%";var r=e.find((function(e){return e.Country_Region.toLowerCase()===t.Country.toLowerCase()})).Population;return t["Cases per 100k"]=(t.Confirmed/r*1e5).toFixed(0),t})),Object.keys(t[0]).forEach((function(e){a.push({Header:e,accessor:e})}))),{tableData:t,tableColumns:a}}},{key:"getCountryOptions",value:function(){var e=[{value:"world",label:"World"}],t=this.getCountriesDataForDate("latest");return t&&t.forEach((function(t){return e.push({value:t.Country,label:t.Country})})),e}},{key:"onSelectChanged",value:function(e){var t=new URL(window.location.href);t.searchParams.set("country",e.value),window.history.pushState({path:t.href},"",t.href),this.setState({country:e.value})}},{key:"onCompareSelectChanged",value:function(e){var t=this.state.countriesToCompare,a=JSON.parse(JSON.stringify(t));a.push(e.value),this.setState({countriesToCompare:a})}},{key:"render",value:function(){var e=this.state,t=e.country,a=e.isLoading,r=this.getTotalCasesAndDeaths(),o=r.totalCases,s=r.totalDeaths,l=(s/o*100).toFixed(2),i=this.getNewCasesAndRate(),c=i.newCases,u=i.newCasesRate,d=this.getCasesPer100k(),m=this.getChartData(),h=this.getMapData(),g=this.getTableData(),p=g.tableData,x=g.tableColumns,D=this.getCountryOptions();return a?n.a.createElement("div",{className:"flex h-screen"},n.a.createElement("p",{className:"m-auto"},"Loading ...")):n.a.createElement("div",null,n.a.createElement(C,null),n.a.createElement("div",{className:"px-6 md:px-16"},n.a.createElement(f.a,{className:"mt-6 w-full md:w-1/3 capitalize",options:D,defaultValue:{value:t,label:t},isLoading:a,onChange:this.onSelectChanged.bind(this)}),n.a.createElement(y,{totalCases:w()(o).format("0,0"),totalDeaths:w()(s).format("0,0"),deathRate:l,newCases:w()(c).format("0,0"),newCaseRate:u,casesPer100k:d}),n.a.createElement("div",{className:"mt-4 mb-4 w-full"},n.a.createElement(v,{data:m})),n.a.createElement("div",{className:"mt-4 mb-4 w-full"},n.a.createElement(b,{data:h})),n.a.createElement("div",{className:"mt-4 mb-4 w-full border-2"},n.a.createElement(k,{data:p,columns:x}))))}}]),a}(r.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.13d59bde.chunk.js.map